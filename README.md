# DLang-AI
某公司需要进⾏数字化转型，希望构建⼀个基于⼤模型的⽂档问答应⽤，对公司内的存量电⼦⽂档进⾏更为精细的知识管理。现提供该公司中的多份电⼦⽂档作为样例，包括⾏政、业务、技术、财务等多种类型。⽂档类型主要为⾮结构化⽂档: word、⽂本形式pdf、图⽚形式pdf
要求：
1. （代码实现）使⽤langchain构建⼀个基于⼤模型的RAG应⽤⼯程项⽬，针对提供的⽂档，选取适当的⽂档解析⽅式，提取⽂档信息，并将其注⼊向量数据库，⽤于⽂档问答。
2. （代码实现，问答题）在公司内部有多个部⻔，每个部⻔的⼯作⼈员所能接触到的⽂档范围不同；在同⼀个部⻔内部，不同职级的员⼯对⽂档的管理权限也有差异。请说明如何灵活地划定每个部⻔、每个⼈能检索的⽂档范围，并为你的RAG应⽤实现该权限管理功能。
3. （代码实现，问答题）RAG系统的⼀⼤特性就是有真实可靠的原始⽂档数据为⼤模型⽣成的内容做背书。为了充分展⽰这⼀特性，你不仅需要关联⽂档中显⽰参考的⽂本字段，更需要向⽤⼾提供对应⽂本字段在原始⽂档中的确切bounding box位置，并考虑两点：
- 如何处理跨⻚⽂本；
- 如何整合⽂本解析结果为⼀个对⼤模型回答问题⽽⾔有效的chunk。

改进此RAG应⽤，在RAG应⽤检索结果的⽂本中，提供原⽂回溯信息。如下⾯这种形式（不需要设计前端界⾯）
```
{
...
"bbox": [0.045372050816696916, 0.09637046307884856, 0.31306715063520874,
0.2227784730913642],
"info": "1甲 B、⼄类油品的储存量,不应⼤于⻋间两昼夜的需⽤量，且不应⼤于2m”。2丙
类油品的储存量不宜⼤于10m²3⻋间供油站应靠⼚房外墙布置，并应设耐⽕极限不低于3h的⾮燃烧
体墙和耐⽕极限不低于1.5h的⾮燃烧体屋顶。4储存甲 B、⼄类油品的⻋间供油站,应为单层建筑,
并应设有直接向外的出⼈⼝和防⽌液体流散的设施。5存油量不⼤于5m²的丙类油品储罐（箱）,可直
接设置在丁、戊类⽣产⼚房内。X(箱)的通⽓管管⼝,应⾼出屋⾯1.5m,与⼴房⻔、窗之间的距离不
应⼩于4m∕储罐(箱)与油泵的距离可不受限制。",
"contentType": "text",
"originalFile": "common/⽯油化⼯/标准/设计规范/供应/269GB50074-2014⽯油库设计
规范.pdf",
"pageNo": 60,
...
}
```

### 项目说明

1. 解压后进入项目根目录，设置虚拟环境并安装依赖：  
 `pip install requirements.txt` 
2. 运行：`python src/main.py` 


！注意：目前可以运行，但项目代码未完善，依然存在bug待修复

!! 由于邮件打包大小限制，data文件未放入请先设置路径，放入文档，如：
`DLang-AI/data/技术部门/xxx.pdf` 